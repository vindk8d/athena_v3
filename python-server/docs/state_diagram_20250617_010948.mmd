graph TD
    subgraph State["AthenaState"]
        messages["messages"]
        user_id["user_id"]
        contact_id["contact_id"]
        user_details["user_details"]
        user_timezone["user_timezone"]
        current_datetime["current_datetime"]
        intent["intent"]
        intent_confidence["intent_confidence"]
        is_calendar_related["is_calendar_related"]
        plan["plan"]
        plan_complete["plan_complete"]
        required_info["required_info"]
        missing_info["missing_info"]
        temporal_references["temporal_references"]
        normalized_times["normalized_times"]
        time_parsing_errors["time_parsing_errors"]
        needs_clarification["needs_clarification"]
        clarification_question["clarification_question"]
        clarification_context["clarification_context"]
        tools_to_execute["tools_to_execute"]
        tool_results["tool_results"]
        execution_errors["execution_errors"]
        final_response["final_response"]
        response_metadata["response_metadata"]
        next_node["next_node"]
        conversation_complete["conversation_complete"]
    end
    _clarification_node["_clarification<br/>Generate clarification questions for missing information."]
    _execution_node["_execution<br/>Execute the planned tools."]
    _input_interpreter_node["_input_interpreter<br/>Interpret the input and classify intent."]
    _planner_node["_planner<br/>Create execution plan and assess information completeness."]
    _response_generator_node["_response_generator<br/>Generate the final response."]
    _time_normalizer_node["_time_normalizer<br/>Normalize time references to tool-compatible formats."]